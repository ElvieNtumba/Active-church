<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Us - The Active Church</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />

    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="bg-gray-100 text-gray-800">
    <!-- Navbar -->
    <header class="navbar">
      <div class="logo">
        <img src="images/Vector.png" alt="logo" />
      </div>
      <nav class="nav-links">
        <a href="index.html">HOME</a>
        <a href="OurVision.html">OUR VISION</a>
        <a href="offering.html">GIVE</a>
        <a href="watchlive.html">WATCH LIVE</a>
        <a href="contactus.html">CONTACT US</a>
      </nav>
    </header>

    <!-- Hero -->
    <section
      class="bg-black text-white flex flex-col justify-center items-center min-h-[250px]"
    >
      <h1 class="text-4xl font-bold mb-4">Contact Us</h1>
      <p class="text-center max-w-xl">
        We'd love to hear from you! Reach out with questions, prayer requests,
        or just to say hello.
      </p>
    </section>

    <!-- Main Contact Section -->
    <section class="py-16">
      <div class="max-w-6xl mx-auto px-4 grid md:grid-cols-2 gap-10">
        <!-- Contact Form -->
        <div class="bg-white p-6 rounded shadow">
          <h2 class="text-2xl font-bold mb-4 text-black">Send us a Message</h2>
          <p class="text-sm mb-6">
            Fill out the form and we‚Äôll get back to you as soon as possible
          </p>
          <form id="contactForm" class="space-y-4 text-black">
            <div class="flex gap-4 text-black">
              <div class="w-1/2">
                <label class="text-sm text-black">First Name</label>
                <input
                  type="text"
                  name="firstName"
                  class="w-full p-2 border rounded"
                  required
                />
              </div>
              <div class="w-1/2">
                <label class="text-sm text-black">Last Name</label>
                <input
                  type="text"
                  name="lastName"
                  class="w-full p-2 border rounded"
                  required
                />
              </div>
            </div>
            <div>
              <label class="text-sm text-black">Email</label>
              <input
                type="email"
                name="email"
                class="w-full p-2 border rounded"
                required
              />
            </div>
            <div>
              <label class="text-sm text-black">Phone (Optional)</label>
              <input
                type="text"
                name="phone"
                placeholder="(000) 000-000"
                class="w-full p-2 border rounded"
              />
            </div>
            <div>
              <label class="text-sm text-black">Message</label>
              <textarea
                rows="5"
                name="message"
                placeholder="Tell us how we can help you..."
                class="w-full p-2 border rounded"
                required
              ></textarea>
            </div>
            <button
              type="submit"
              class="bg-black text-white px-6 py-2 rounded hover:bg-gray-800"
            >
              Send
            </button>
          </form>

          <script>
            document
              .getElementById("contactForm")
              .addEventListener("submit", async function (e) {
                e.preventDefault();
                const formData = new FormData(e.target);

                const contactData = {
                  firstName: formData.get("firstName"),
                  lastName: formData.get("lastName"),
                  email: formData.get("email"),
                  phone: formData.get("phone"),
                  message: formData.get("message"),
                };

                try {
                  const response = await fetch(
                    "http://localhost:5000/api/contact",
                    {
                      method: "POST",
                      headers: {
                        "Content-Type": "application/json",
                      },
                      body: JSON.stringify(contactData),
                    }
                  );

                  const result = await response.json();

                  if (response.ok) {
                    alert(result.message || "Message sent successfully!");
                    e.target.reset(); 
                  } else {
                    alert(result.message || "Error sending message.");
                  }
                } catch (error) {
                  console.error("Error:", error);
                  alert("Failed to send message. Please try again.");
                }
              });
          </script>
        </div>

        <!-- Contact Info -->
        <div class="bg-white p-6 rounded shadow space-y-8">
          <div>
            <h3 class="text-2xl text-black font-bold mb-2">Get in Touch</h3>

            <div class="flex items-start gap-3 mb-4">
              <div class="text-red-600 text-xl">üìç</div>
              <div>
                <p class="font-semibold text-black">Address</p>
                <p class="text-black">
                  72 Marlborough rd<br class="text-black" />Springfield,
                  Johannesburg
                </p>
              </div>
            </div>
            <div class="flex items-start gap-3">
              <div class="text-red-600 text-xl">‚úâ</div>
              <div>
                <p class="font-semibold text-black">Email</p>
                <p class="text-black">info@theactivechurch.org</p>
              </div>
            </div>
          </div>

          <div>
            <h3 class="text-black">Follow Us</h3>

            <div class="social-icons">
              <a
                href="https://www.facebook.com/theActiveChurch"
                class="facebook"
                ><i class="fab fa-facebook-f"></i
              ></a>
              <a href="https://instagram.com" class="instagram"
                ><i class="fab fa-instagram"></i
              ></a>
              <a href="https://www.youtube.com/@TheActiveChurch" class="youtube"
                ><i class="fab fa-youtube"></i
              ></a>
            </div>
          </div>

          <div>
            <p class="font-semibold mb-2">Find Us</p>
            <div class="w-full h-48 bg-gray-200 rounded overflow-hidden">
              <iframe
                class="w-full h-full"
                frameborder="0"
                scrolling="no"
                marginheight="0"
                marginwidth="0"
                src="https://maps.google.com/maps?q=72%20Marlborough%20rd,%20Johannesburg&t=&z=13&ie=UTF8&iwloc=&output=embed"
              ></iframe>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div class="footer-content">
        <div class="footer-section logo-section">
          <!-- <img src="images/Vector.png" alt="logo" /> -->
          <p class="tagline">
            A Church Raising A New Generation<br />
            A Generation That Will Change This Nation<br />
            To God Be The Glory.
          </p>
        </div>

        <div class="footer-section">
          <h2>Quick Links</h2>
          <a href="#">Our Vision</a>
          <a href="#">Service Times</a>
          <a href="#">Give Online</a>
          <a href="#">Watch Live</a>
        </div>

        <div class="footer-section">
          <h2>Contact</h2>
          <p>72 Marlborough rd, Springfield</p>
          <p>info@theactivechurch.org</p>
        </div>
      </div>

      <div class="copyright">
        ¬© 2025 The Active Church. All rights reserved.
      </div>
    </footer>
  </body>

  <script>
    document
      .getElementById("contactForm")
      .addEventListener("submit", async function (e) {
        e.preventDefault();

        // Grab form values
        const firstName = e.target[0].value;
        const lastName = e.target[1].value;
        const email = e.target[2].value;
        const phone = e.target[3].value;
        const message = e.target[4].value;

        const contactData = {
          firstName,
          lastName,
          email,
          phone,
          message,
        };

        try {
          const response = await fetch("http://localhost:5000/api/contact", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(contactData),
          });

          const result = await response.json();
          alert(result.message || "Message sent successfully!");
        } catch (error) {
          console.error("Error:", error);
          alert("Failed to send message. Please try again.");
        }
      });
  </script>
</html>
